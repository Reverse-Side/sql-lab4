## üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –¥–ª—è –†–æ–∑—Ä–æ–±–Ω–∏–∫–∞: –†–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó —Ç–∞ –§—ñ–ª—å—Ç—Ä–∏

–¶—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –æ–ø–∏—Å—É—î –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∫–ª–∞—Å—ñ–≤ **`RepositoryORM`** —Ç–∞ **`Filter`** –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö —É –≤–∞—à–æ–º—É –ø—Ä–æ—î–∫—Ç—ñ.

-----

## 1\. –†–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π (RepositoryORM)

–ö–ª–∞—Å `RepositoryORM` —Ä–µ–∞–ª—ñ–∑—É—î —à–∞–±–ª–æ–Ω **–†–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π** (Repository Pattern) —Ç–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î SQLAlchemy ORM –¥–ª—è –∞–±—Å—Ç—Ä–∞–≥—É–≤–∞–Ω–Ω—è –ª–æ–≥—ñ–∫–∏ –¥–æ—Å—Ç—É–ø—É –¥–æ –¥–∞–Ω–∏—Ö. –í—ñ–Ω –Ω–∞–¥–∞—î —É–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –æ—Å–Ω–æ–≤–Ω–∏—Ö CRUD-–æ–ø–µ—Ä–∞—Ü—ñ–π (`add`, `find`, `find_all`, `update`, `delete`).

### 1.1. –Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ç–∞ –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è

–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è `RepositoryORM` –Ω–∞—Å–ª—ñ–¥—É—î –ø—Ä–æ—Ç–æ–∫–æ–ª `IRepository`, —â–æ –≥–∞—Ä–∞–Ω—Ç—É—î –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–∏–π –Ω–∞–±—ñ—Ä –º–µ—Ç–æ–¥—ñ–≤.

  * **`IRepository[T]`** (–∑ `src/interface.py`):

    ```python
    class IRepository(Generic[T], Protocol):
        model: type[T]
        async def add(self, data) -> T: ...
        async def find(self, filter: Filter = Filter(), **filters: Op) -> T | None: ...
        async def find_all(
            self, offset: int = 0, limit: int = 10, filter: Filter = Filter(), **filters: Op
        ) -> list[T]: ...
        async def update(self, _id: int, data:dict) -> T: ...
        async def delete(self, _id: int) -> T | None: ...
    ```

  * **`RepositoryORM`** (–∑ `src/repository.py`):

    –ö–ª–∞—Å –ø—Ä–∏–π–º–∞—î —Å–µ—Å—ñ—é SQLAlchemy (`AsyncSession`) —Ç–∞ –º–æ–¥–µ–ª—å ORM —è–∫ –∞—Ä–≥—É–º–µ–Ω—Ç–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞.

    ```python
    class RepositoryORM(Generic[T]):
        def __init__(self, session: AsyncSession, model: type[T]):
            self.session = session
            self.model = model
            self._filter = FilterHeadler(self.model)
    ```

### 1.2. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –í–ª–∞—Å–Ω–æ–≥–æ –†–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é

–ó–∞–∑–≤–∏—á–∞–π, –≤–∏ –Ω–µ —É—Å–ø–∞–¥–∫–æ–≤—É—î—Ç–µ `RepositoryORM` –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ, —è–∫—â–æ –≤–∞–º –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–∞ **—Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω–∞ –ª–æ–≥—ñ–∫–∞ –¥–æ—Å—Ç—É–ø—É –¥–æ –¥–∞–Ω–∏—Ö** (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –¥–ª—è `UserRepository` —É –≤–∞—à–æ–º—É –ø—Ä–æ—î–∫—Ç—ñ). –ù–∞—Ç–æ–º—ñ—Å—Ç—å, –≤–∏ —Å—Ç–≤–æ—Ä—é—î—Ç–µ **–∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π –µ–∫–∑–µ–º–ø–ª—è—Ä** —Ü—å–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é –≤ –º–µ–∂–∞—Ö `UnitOfWork`.

–Ø–∫—â–æ –≤–∞–º –≤—Å–µ –∂ –ø–æ—Ç—Ä—ñ–±–µ–Ω —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª, —Å—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π, –Ω–∞—Å–ª—ñ–¥—É—é—á–∏ `RepositoryORM` —Ç–∞ —Ä–µ–∞–ª—ñ–∑—É—é—á–∏ –≤–ª–∞—Å–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–ø—Ä–æ—Ç–æ–∫–æ–ª):

```python
# 1. –°—Ç–≤–æ—Ä—ñ—Ç—å —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å
from src.interface import IRepository
from src.users.models import UserORM
# ... —ñ–Ω—à—ñ —ñ–º–ø–æ—Ä—Ç–∏

class ICustomRepository(IRepository[CustomModel], Protocol):
    async def custom_method(self, user_id: int) -> list[...]: ...

# 2. –°—Ç–≤–æ—Ä—ñ—Ç—å —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é
class CustomRepository(RepositoryORM[CustomModel], ICustomRepository):
    async def custom_method(self, user_id: int) -> list[...]:
        # –í–∞—à–∞ —É–Ω—ñ–∫–∞–ª—å–Ω–∞ –ª–æ–≥—ñ–∫–∞
        pass
```

### 1.3. –î–æ–¥–∞–≤–∞–Ω–Ω—è –†–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é –¥–æ UnitOfWork

–î–ª—è –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è **–∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—ñ** —Ç–∞ –∫–µ—Ä—É–≤–∞–Ω–Ω—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—è–º–∏, –≤—Å—ñ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó –ø–æ–≤–∏–Ω–Ω—ñ –±—É—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ —á–µ—Ä–µ–∑ **`SqlAlchemyUnitOfWork`** (–∑ `src/unit_of_work.py`).

1.  **–û–Ω–æ–≤—ñ—Ç—å `IUnitOfWork`** (`src/interface.py`):
    –î–æ–¥–∞–π—Ç–µ –Ω–æ–≤–∏–π –∞—Ç—Ä–∏–±—É—Ç –∑ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–º —Ç–∏–ø–æ–º.

    ```python
    class IUnitOfWork(Generic[T],Protocol):
        # ... —ñ—Å–Ω—É—é—á—ñ –∞—Ç—Ä–∏–±—É—Ç–∏
        new_repo_name: "ICustomRepository" # <-- –î–æ–¥–∞—Ç–∏ —Ç—É—Ç
        async def __aenter__(self) -> "IUnitOfWork": ...
        # ...
    ```

2.  **–û–Ω–æ–≤—ñ—Ç—å `SqlAlchemyUnitOfWork`** (`src/unit_of_work.py`):

      * –î–æ–¥–∞–π—Ç–µ –∞—Ç—Ä–∏–±—É—Ç —É –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä (`__init__`).
      * –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É–π—Ç–µ –π–æ–≥–æ —É –º–µ—Ç–æ–¥—ñ `__aenter__`.

    <!-- end list -->

    ```python
    # src/unit_of_work.py

    class SqlAlchemyUnitOfWork(IUnitOfWork):
        def __init__(self, session_factory: async_sessionmaker):
            # ...
            self.new_repo_name: CustomRepository # <-- –î–æ–¥–∞—Ç–∏ —Ç—É—Ç

        async def __aenter__(self):
            self.session: AsyncSession = self.session_factory()
            # ...
            self.new_repo_name = CustomRepository(self.session, CustomModel) # <-- –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Ç—É—Ç
            return self
    ```

### 1.4. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –†–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é

–†–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —á–µ—Ä–µ–∑ `UnitOfWork` –¥–ª—è –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π–Ω–æ—Å—Ç—ñ:

```python
from src.unit_of_work import get_unit_of_work
from src.filter import eq, gt

async def service_operation():
    uow = get_unit_of_work()
    async with uow as work:
        
        # –û–ø–µ—Ä–∞—Ü—ñ—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è
        new_user = await work.users.add({"username": "NewUser", "email": "a@b.com"})
        
        # –û–ø–µ—Ä–∞—Ü—ñ—è –ø–æ—à—É–∫—É –∑–∞ —Ñ—ñ–ª—å—Ç—Ä–æ–º
        found_user = await work.users.find(username=eq("NewUser"))
        
        # –û–ø–µ—Ä–∞—Ü—ñ—è –ø–æ—à—É–∫—É –≤—Å—ñ—Ö (–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ —Ç–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—î—é)
        active_users = await work.users.find_all(
            limit=20, 
            offset=0, 
            age=gt(18), # –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ñ–∞–±—Ä–∏–∫–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ñ–≤
            is_active=eq(True)
        )
        
        # –û–ø–µ—Ä–∞—Ü—ñ—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
        updated_user = await work.users.update(_id=new_user.id, data={"username": "BetterUser"})
        
        # –û–ø–µ—Ä–∞—Ü—ñ—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è
        deleted_user = await work.users.delete(_id=new_user.id)
        
    # –ü—ñ—Å–ª—è –≤–∏—Ö–æ–¥—É –∑ 'async with' –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π commit –∞–±–æ rollback.
```

-----

## 2\. –§—ñ–ª—å—Ç—Ä–∏ (Filter, Op, FilterHeadler)

–°–∏—Å—Ç–µ–º–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó –¥–æ–∑–≤–æ–ª—è—î —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ —Å–∫–ª–∞–¥–Ω—ñ, —Ç–∏–ø—ñ–∑–æ–≤–∞–Ω—ñ —É–º–æ–≤–∏ –¥–ª—è –∑–∞–ø–∏—Ç—ñ–≤ –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥.

### 2.1. –û–ø–µ—Ä–∞—Ç–æ—Ä–∏ (`Op` —Ç–∞ –§–∞–±—Ä–∏–∫–∏)

–ö–ª–∞—Å `Op` (–∑ `src/filter.py`) —ñ–Ω–∫–∞–ø—Å—É–ª—é—î –∑–Ω–∞—á–µ–Ω–Ω—è —Ç–∞ —Ñ—É–Ω–∫—Ü—ñ—é-–æ–ø–µ—Ä–∞—Ç–æ—Ä SQLAlchemy (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `__eq__`, `like`, `in_`). –§–∞–±—Ä–∏—á–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `eq`, `gt`, `like`) —Å—Ç–≤–æ—Ä—é—é—Ç—å –µ–∫–∑–µ–º–ø–ª—è—Ä–∏ `Op`.

  * **–î–æ—Å—Ç—É–ø–Ω—ñ –§–∞–±—Ä–∏–∫–∏ –û–ø–µ—Ä–∞—Ç–æ—Ä—ñ–≤:**
      * `eq(value)`: –¥–æ—Ä—ñ–≤–Ω—é—î (`=`)
      * `neq(value)`: –Ω–µ –¥–æ—Ä—ñ–≤–Ω—é—î (`!=`)
      * `gt(value)`: –±—ñ–ª—å—à–µ –Ω—ñ–∂ (`>`)
      * `lt(value)`: –º–µ–Ω—à–µ –Ω—ñ–∂ (`<`)
      * `gte(value)`: –±—ñ–ª—å—à–µ –∞–±–æ –¥–æ—Ä—ñ–≤–Ω—é—î (`>=`)
      * `lte(value)`: –º–µ–Ω—à–µ –∞–±–æ –¥–æ—Ä—ñ–≤–Ω—é—î (`<=`)
      * `like(value)`: –ø–æ—à—É–∫ –∑–∞ –∑—Ä–∞–∑–∫–æ–º (`LIKE`, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `like("%test%")`)
      * `in_(value)`: –≤—Ö–æ–¥–∏—Ç—å –¥–æ —Å–ø–∏—Å–∫—É (`IN`, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `in_([1, 2, 3])`)
      * *... —Ç–∞ —ñ–Ω—à—ñ, –¥–∏–≤. `src/filter.py`*

### 2.2. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ö–ª–∞—Å—É –§—ñ–ª—å—Ç—Ä–∞ (`Filter`)

–ö–ª–∞—Å `Filter` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –ø–æ–ª—ñ–≤, –∑–∞ —è–∫–∏–º–∏ –º–æ–∂–Ω–∞ —Ñ—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏, —Ç–∞ —ó—Ö–Ω—ñ—Ö **–æ–ø–µ—Ä–∞—Ç–æ—Ä—ñ–≤ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º**.

1.  **–ù–∞—Å–ª—ñ–¥—É–≤–∞–Ω–Ω—è:** –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π –∫–ª–∞—Å, —â–æ –Ω–∞—Å–ª—ñ–¥—É—î `Filter`.
2.  **–ê–Ω–æ—Ç–∞—Ü—ñ—ó –¢–∏–ø—ñ–≤:** –í–∏–∑–Ω–∞—á—Ç–µ –ø–æ–ª—è (–∞—Ç—Ä–∏–±—É—Ç–∏), —â–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—é—Ç—å –ø–æ–ª—è–º –º–æ–¥–µ–ª—ñ ORM, –∑ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–º–∏ –∞–Ω–æ—Ç–∞—Ü—ñ—è–º–∏ —Ç–∏–ø—ñ–≤ Python.
3.  **–û–ø–µ—Ä–∞—Ç–æ—Ä–∏ –ó–∞ –ó–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º:** –ü—Ä–∏–∑–Ω–∞—á—Ç–µ —Ñ–∞–±—Ä–∏–∫—É –æ–ø–µ—Ä–∞—Ç–æ—Ä—ñ–≤ —è–∫ –∑–Ω–∞—á–µ–Ω–Ω—è –ø–æ–ª—è –¥–ª—è –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è **–æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º**. –Ø–∫—â–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä –Ω–µ –≤–∫–∞–∑–∞–Ω–æ, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è `eq()` (–¥–æ—Ä—ñ–≤–Ω—é—î).

#### –ü—Ä–∏–∫–ª–∞–¥ (`UserFilter` –∑ `test_filter.py`):

```python
class UserFilter(Filter):
    # –û–ø–µ—Ä–∞—Ç–æ—Ä –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º: eq()
    name: str 
    
    # –û–ø–µ—Ä–∞—Ç–æ—Ä –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º: gt()
    age: int = gt() 
    
    # –û–ø–µ—Ä–∞—Ç–æ—Ä –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º: in_()
    id: int = in_() 
```

### 2.3. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –§—ñ–ª—å—Ç—Ä–∞

1.  **–Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è:** –ü—Ä–∏ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó –∫–ª–∞—Å—É —Ñ—ñ–ª—å—Ç—Ä–∞, –ø–µ—Ä–µ–¥–∞–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –æ–±–≥–æ—Ä—Ç–∞—é—Ç—å—Å—è —É –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ –æ–±'—î–∫—Ç–∏ `Op`.

    ```python
    # –°—Ç–≤–æ—Ä—é—î –æ–±'—î–∫—Ç–∏ Op: name=eq("John"), age=gt(25)
    my_filter = UserFilter(name="John", age=25) 
    ```

2.  **–ü–µ—Ä–µ–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –û–ø–µ—Ä–∞—Ç–æ—Ä–∞ (`overload`):** –Ø–∫—â–æ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–µ–Ω —ñ–Ω—à–∏–π –æ–ø–µ—Ä–∞—Ç–æ—Ä, –Ω—ñ–∂ —Ç–æ–π, —â–æ –±—É–≤ –≤–∏–∑–Ω–∞—á–µ–Ω–∏–π —É –∫–ª–∞—Å—ñ —Ñ—ñ–ª—å—Ç—Ä–∞, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –º–µ—Ç–æ–¥ `overload`, –ø–µ—Ä–µ–¥–∞—é—á–∏ –≥–æ—Ç–æ–≤—ñ –æ–±'—î–∫—Ç–∏ `Op`.

    ```python
    my_filter.overload(name=like("%John%"), age=gte(20))

    # –¢–µ–ø–µ—Ä: name=like("%John%"), age=gte(20)
    ```

### 2.4. –û–±—Ä–æ–±–Ω–∏–∫ –§—ñ–ª—å—Ç—Ä—ñ–≤ (`FilterHeadler`)

`FilterHeadler` —î –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é. –í—ñ–Ω –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è –æ–±'—î–∫—Ç–∞ `Filter` –Ω–∞ —Å–ø–∏—Å–æ–∫ —É–º–æ–≤ SQLAlchemy:

1.  –í—ñ–Ω –æ—Ç—Ä–∏–º—É—î –æ–±'—î–∫—Ç `Filter`.
2.  –Ü—Ç–µ—Ä—É—î –ø–æ –π–æ–≥–æ –ø–æ–ª—è—Ö (`to_dict()`).
3.  –î–ª—è –∫–æ–∂–Ω–æ–≥–æ –ø–æ–ª—è –≤–∏–∫–ª–∏–∫–∞—î –º–µ—Ç–æ–¥ `apply()` –æ–±'—î–∫—Ç–∞ `Op`, –ø–µ—Ä–µ–¥–∞—é—á–∏ –π–æ–º—É –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—É –∫–æ–ª–æ–Ω–∫—É –º–æ–¥–µ–ª—ñ ORM (`getattr(self.model, field_name)`).

**–¶–µ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ** –≤ –º–µ—Ç–æ–¥–∞—Ö `find` —Ç–∞ `find_all` –∫–ª–∞—Å—É `RepositoryORM` —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥ `_resolve_filter` (–¥–∏–≤. `src/repository.py`).

### 2.5. –ö–æ–º–±—ñ–Ω–æ–≤–∞–Ω–∞ –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è

–£ –º–µ—Ç–æ–¥–∞—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –æ–±–∏–¥–≤–∞ —Å–ø–æ—Å–æ–±–∏ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó –æ–¥–Ω–æ—á–∞—Å–Ω–æ:

  * **–ü–æ–∑–∏—Ü—ñ–π–Ω–∏–π –∞—Ä–≥—É–º–µ–Ω—Ç `filter`:** –ü—Ä–∏–π–º–∞—î –æ–±'—î–∫—Ç, —è–∫–∏–π –Ω–∞—Å–ª—ñ–¥—É—î `Filter`.
  * **–Ü–º–µ–Ω–æ–≤–∞–Ω—ñ –∞—Ä–≥—É–º–µ–Ω—Ç–∏ `**filters`:** –ü—Ä–∏–π–º–∞—é—Ç—å —Ñ–∞–±—Ä–∏–∫–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ñ–≤ (`Op`). –¶—ñ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∏ **–ø–µ—Ä–µ–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å** —Ç—ñ, —â–æ –±—É–ª–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ –≤ –æ–±'—î–∫—Ç—ñ `filter`.

<!-- end list -->

```python
# –ü—Ä–∏–∫–ª–∞–¥:
# 1. –°—Ç–≤–æ—Ä—é—î–º–æ –±–∞–∑–æ–≤–∏–π —Ñ—ñ–ª—å—Ç—Ä
f = UserFilter(name="John", age=30) 

# 2. –í–∏–∫–ª–∏–∫–∞—î–º–æ find_all
# - name –≤—ñ–∑—å–º–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä –∑ f (eq("John"))
# - age –±—É–¥–µ –ü–ï–†–ï–í–ê–ù–¢–ê–ñ–ï–ù–û –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–º gt(25)
users = await work.users.find_all(filter=f, age=gt(25)) 
```

**–¶–µ –¥–æ–∑–≤–æ–ª—è—î: 1) –í–∏–∑–Ω–∞—á–∏—Ç–∏ –±–∞–∑–æ–≤–∏–π, —Ç–∏–ø—ñ–∑–æ–≤–∞–Ω–∏–π —Ñ—ñ–ª—å—Ç—Ä, 2) –®–≤–∏–¥–∫–æ –¥–æ–¥–∞—Ç–∏ –∞–±–æ –∑–º—ñ–Ω–∏—Ç–∏ –æ–∫—Ä–µ–º—ñ —É–º–æ–≤–∏ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó –±–µ–∑ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –∫–ª–∞—Å—É `Filter`.**